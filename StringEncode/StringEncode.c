#define _CRT_RAND_S
#include <stdlib.h>
#include <string.h>
#include <malloc.h>
#include <wchar.h>
#include <stdio.h>

int main() {
	const wchar_t in_str[] = L"%APPDATA%\\mrazota\\svñhost.exe";
	wchar_t* a, *b;
	unsigned int length = wcslen(in_str);
	a = _malloca((length+1) * sizeof(wchar_t));
	b = _malloca((length+1) * sizeof(wchar_t));
	if (a && b) {
		a[length] = b[length] = 0;
		for (unsigned int i = 0; i < length; i++) {
			unsigned int random;
			rand_s(&random);
			wchar_t ch_random = (wchar_t)random;
			a[i] = ch_random ^ in_str[i];
			b[i] = (~ch_random);
		};
		for (unsigned int i = 0; i < length; i++) wprintf(L"%04hx ", a[i]);
		_putws(L"");
		for (unsigned int i = 0; i < length; i++) wprintf(L"%04hx ", b[i]);
	};
	_freea(b);
	_freea(a);
	return 0;
};