#include <Windows.h>
#include <malloc.h>
#include "functions.h"

#include "expandEnv.h"
LPWSTR expandEnv(LPCWSTR input) {
	DWORD length;
	length = ExpandEnvironmentStringsW(input, NULL, 0);
	if (length) {
		LPWSTR str;
		str = malloc(length * sizeof(WCHAR));
		if (str) {
			if (ExpandEnvironmentStringsW(input, str, length)) return str;
			else return NULL;
		}
		else return NULL;
	}
	else return NULL;
};